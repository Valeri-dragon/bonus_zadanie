(()=>{"use strict";const e=e=>fetch(e,{method:"GET"}).then((e=>e.json())).then((e=>e)).catch((e=>console.log("Данные не получены "+e))),a=e=>{const a=document.querySelector("main"),t=document.createElement("div");t.setAttribute("id","heroe-conteiner"),a.innerHTML="",t.innerHTML="",e.forEach((e=>{const n=document.createElement("div"),{name:s,realName:l,species:o,citizenship:c,gender:r,birthDay:i,deathDay:p,status:d,actors:m,photo:u,movies:v}=e;let h=[];v&&v.forEach((e=>{e&&h.push(`<span>${e}</span>`)})),n.classList.add("block-card"),n.innerHTML=`\n      <div class="heroes-card">\n     <div class="row">\n              <img src="db/${u}"  alt="${s}" class="heroe-image"/>\n               <div class="column">\n              <h3>${s}</h3>\n               <p><span class="descrip">real name: </span> ${l||"no data available"}</p>\n               <p><span class="descrip">species: </span> ${o||"no data available"}</p>\n              <p><span class="descrip">citizenship: </span> ${c||"no data available"}</p>\n             <p><span class="descrip">gender: </span> ${r||"no data available"}</p>\n             <p><span class="descrip">birth day: </span> ${i||"no data available"}</p>\n             <p><span class="descrip">deat day: </span> ${p||"no data available"}</p>\n             <p><span class="descrip">status: </span>${d||"no data available"}</p>\n              </div>\n              </div>\n              \n             <p><span class="descrip">actors: </span> ${m||"no data available"}</p>\n           <p class="column"><span class="descrip">movies: </span> ${h.join("")}</p>\n            </div>\n\n      `,t.append(n),a.append(t)}))};e("./dbHeroes.json").then((e=>a(e))),(()=>{const t=document.querySelector(".control-wrapper"),n=document.querySelector(".search-wrapper_input"),s=document.querySelector(".catalog"),l=document.createElement("p");let o=!1;const c=()=>{const s=n.value;l.textContent="",e("./dbHeroes.json").then((e=>a(((e,a)=>e.filter((e=>e.name.toLowerCase().includes(a.toLowerCase()))))(e,s)))),l.textContent=`Результат поиска по вашему запросу: ${s}`,t.after(l)},r=((e,a=1e3)=>(...t)=>{t.lastCall=Date.now();let n=t.lastCall;n&&t.lastCall-n<=a&&clearTimeout(t.lastCallTimer),t.lastCallTimer=setTimeout((()=>e(...t)),a)})(c,3e3);n.addEventListener("input",r),n.addEventListener("keydown",(function(e){13===e.keyCode&&c()})),t.addEventListener("click",(r=>{r.target.closest(".search-btn")?c():r.target.closest(".catalog-button")&&(o=!o,s.style.display=o?"flex":"",r.target.closest("li")&&(s=>{n.value="";const o=s.textContent;l.textContent="",e("./dbHeroes.json").then((e=>a(((e,a)=>e.filter((e=>{for(let t in e.movies)if(e.movies[t].trim()===a)return e.movies[t].trim()===a})))(e,o)))),l.textContent=`Все герои из фильма ${o}`,t.after(l)})(r.target))}))})()})();
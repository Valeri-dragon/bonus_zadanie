(()=>{"use strict";const e=e=>fetch(e,{method:"GET"}).then((e=>e.json())).then((e=>e)).catch((e=>console.log("Данные не получены "+e))),t=e=>{const t=document.querySelector("main"),a=document.createElement("div");a.setAttribute("id","heroe-conteiner"),t.innerHTML="",a.innerHTML="",e.forEach((e=>{const n=document.createElement("div"),{name:s,realName:o,species:r,citizenship:l,gender:c,birthDay:i,deathDay:d,status:p,actors:m,photo:u,movies:v}=e;let h=[];v&&v.forEach((e=>{e&&h.push(`<span>${e}</span>`)})),n.classList.add("block-card"),n.innerHTML=`\n      <div class="heroes-card">\n     <div class="row">\n              <img src="db/${u}"  alt="${s}" class="heroe-image"/>\n               <div class="column">\n              <h3>${s}</h3>\n               <p><span class="descrip">real name: </span> ${o||"no data available"}</p>\n               <p><span class="descrip">species: </span> ${r||"no data available"}</p>\n              <p><span class="descrip">citizenship: </span> ${l||"no data available"}</p>\n             <p><span class="descrip">gender: </span> ${c||"no data available"}</p>\n             <p><span class="descrip">birth day: </span> ${i||"no data available"}</p>\n             <p><span class="descrip">deat day: </span> ${d||"no data available"}</p>\n             <p><span class="descrip">status: </span>${p||"no data available"}</p>\n              </div>\n              </div>\n              \n             <p><span class="descrip">actors: </span> ${m||"no data available"}</p>\n           <p class="column"><span class="descrip">movies: </span> ${h.join("")}</p>\n            </div>\n\n      `,a.append(n),t.append(a)}))};e("./dbHeroes.json").then((e=>t(e))),(()=>{const a=document.querySelector(".control-wrapper"),n=document.querySelector(".search-wrapper_input"),s=document.querySelector(".catalog"),o=document.querySelector(".gender"),r=document.createElement("p");let l=!1;const c=()=>{const s=n.value;r.textContent="",e("./dbHeroes.json").then((e=>t(((e,t)=>e.filter((e=>e.name.toLowerCase().includes(t.toLowerCase()))))(e,s)))),r.textContent=`Результат поиска по вашему запросу: ${s}`,a.after(r)},i=((e,t=1e3)=>(...a)=>{a.lastCall=Date.now();let n=a.lastCall;n&&a.lastCall-n<=t&&clearTimeout(a.lastCallTimer),a.lastCallTimer=setTimeout((()=>e(...a)),t)})(c,3e3);n.addEventListener("input",i),n.addEventListener("keydown",(function(e){13===e.keyCode&&c()})),o.addEventListener("change",(n=>{r.textContent="";const s=o.options[o.selectedIndex].textContent;e("./dbHeroes.json").then((e=>t(((e,t)=>e.filter((e=>{if(e.gender.toLowerCase()===t)return e.gender.toLowerCase()===t})))(e,s)))),r.textContent=`Выведены карточки героев пола ${s}`,a.after(r)})),a.addEventListener("click",(o=>{o.target.closest(".search-btn")?c():o.target.closest(".catalog-button")&&(l=!l,s.style.display=l?"flex":"",o.target.closest("li")&&(s=>{n.value="";const o=s.textContent;r.textContent="",e("./dbHeroes.json").then((e=>t(((e,t)=>e.filter((e=>{for(let a in e.movies)if(e.movies[a].trim()===t)return e.movies[a].trim()===t})))(e,o)))),r.textContent=`Все герои из фильма ${o}`,a.after(r)})(o.target))}))})()})();
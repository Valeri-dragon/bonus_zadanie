(()=>{"use strict";const e=e=>fetch(e,{method:"GET"}).then((e=>e.json())).then((e=>e)).catch((e=>console.log("Данные не получены "+e))),a=e=>{const a=document.querySelector("main"),n=document.createElement("div");n.setAttribute("id","heroe-conteiner"),a.innerHTML="",n.innerHTML="",e.forEach((e=>{const t=document.createElement("div"),{name:s,realName:o,species:c,citizenship:r,gender:i,birthDay:l,deathDay:p,status:d,actors:m,photo:u,movies:v}=e;let h=[];v&&v.forEach((e=>{e&&h.push(`<span>${e}</span>`)})),t.classList.add("block-card"),t.innerHTML=`\n      <div class="heroes-card">\n     <div class="row">\n              <img src="db/${u}"  alt="${s}" class="heroe-image"/>\n               <div class="column">\n              <h3>${s}</h3>\n               <p><span class="descrip">real name: </span> ${o||"no data available"}</p>\n               <p><span class="descrip">species: </span> ${c||"no data available"}</p>\n              <p><span class="descrip">citizenship: </span> ${r||"no data available"}</p>\n             <p><span class="descrip">gender: </span> ${i||"no data available"}</p>\n             <p><span class="descrip">birth day: </span> ${l||"no data available"}</p>\n             <p><span class="descrip">deat day: </span> ${p||"no data available"}</p>\n             <p><span class="descrip">status: </span>${d||"no data available"}</p>\n              </div>\n              </div>\n              \n             <p><span class="descrip">actors: </span> ${m||"no data available"}</p>\n           <p class="column"><span class="descrip">movies: </span> ${h.join("")}</p>\n            </div>\n\n      `,n.append(t),a.append(n)}))};e("./dbHeroes.json").then((e=>a(e))),(()=>{const n=document.querySelector(".control-wrapper"),t=document.querySelector(".search-wrapper_input"),s=document.querySelector(".catalog"),o=document.createElement("p");let c=!1;const r=()=>{const s=t.value;o.textContent="",e("./dbHeroes.json").then((e=>a(((e,a)=>e.filter((e=>e.name.toLowerCase().includes(a.toLowerCase()))))(e,s)))),o.textContent=`Результат поиска по вашему запросу: ${s}`,n.after(o)};t.addEventListener("input",r),t.addEventListener("keydown",(function(e){13===e.keyCode&&r()})),n.addEventListener("click",(i=>{i.target.closest(".search-btn")?r():i.target.closest(".catalog-button")&&(c=!c,s.style.display=c?"flex":"",i.target.closest("li")&&(s=>{t.value="";const c=s.textContent;o.textContent="",e("./dbHeroes.json").then((e=>a(((e,a)=>e.filter((e=>{for(let n in e.movies)if(e.movies[n].trim()===a)return e.movies[n].trim()===a})))(e,c)))),o.textContent=`Все герои из фильма ${c}`,n.after(o)})(i.target))}))})()})();